import { formatDefaultLocale, max } from "d3";

type Data = Record<string, Record<number, Array<number>>>
const fips = ['06091', '06067', '06083', '06009', '06111', '06037', '06097', '06031', '06073', '06061', '06075', '06041', '06043', '06035', '06055', '06089', '06053', '06105', '06045', '06027', '06051', '06109', '06095', '06071', '06013', '06003', '06017', '06113', '06115', '06069', '06023', '06065', '06029', '06011', '06015', '06049', '06019', '06039', '06085', '06103', '06077', '06001', '06057', '06007', '06047', '06107', '06099', '06059', '06025', '06101', '06005', '06033', '06063', '06081', '06093', '06087', '06021', '06079'];
const heatData: Data = { "weighted_average": { 0: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 1: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 2: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 3: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 4: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 5: [0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 6: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 7: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 8: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 9: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 10: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 11: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 12: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 13: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 14: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 15: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 16: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0], 17: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0], 18: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 19: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 0, 0, 0], 20: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 21: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 22: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 23: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 24: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 25: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 26: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 27: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 28: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 29: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 30: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 31: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 32: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 33: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 34: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 35: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 36: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], 37: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 38: [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 39: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 40: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 41: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 42: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 43: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 44: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 45: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 46: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0], 47: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0] }, "date": { 0: [1576886400000, 1576972800000], 1: [1577059200000, 1577577600000], 2: [1577664000000, 1578182400000], 3: [1578268800000, 1578787200000], 4: [1578873600000, 1579392000000], 5: [1579478400000, 1579996800000], 6: [1580083200000, 1580601600000], 7: [1580688000000, 1581206400000], 8: [1581292800000, 1581811200000], 9: [1581897600000, 1582416000000], 10: [1582502400000, 1583020800000], 11: [1583107200000, 1583625600000], 12: [1583712000000, 1584230400000], 13: [1584316800000, 1584835200000], 14: [1584921600000, 1585440000000], 15: [1585526400000, 1586044800000], 16: [1586131200000, 1586649600000], 17: [1586736000000, 1587254400000], 18: [1587340800000, 1587859200000], 19: [1587945600000, 1588464000000], 20: [1588550400000, 1589068800000], 21: [1589155200000, 1589673600000], 22: [1589760000000, 1590278400000], 23: [1590364800000, 1590883200000], 24: [1590969600000, 1591488000000], 25: [1591574400000, 1592092800000], 26: [1592179200000, 1592697600000], 27: [1592784000000, 1593302400000], 28: [1593388800000, 1593907200000], 29: [1593993600000, 1594512000000], 30: [1594598400000, 1595116800000], 31: [1595203200000, 1595721600000], 32: [1595808000000, 1596326400000], 33: [1596412800000, 1596931200000], 34: [1597017600000, 1597536000000], 35: [1597622400000, 1598140800000], 36: [1598227200000, 1598745600000], 37: [1598832000000, 1599350400000], 38: [1599436800000, 1599955200000], 39: [1600041600000, 1600560000000], 40: [1600646400000, 1601164800000], 41: [1601251200000, 1601769600000], 42: [1601856000000, 1602374400000], 43: [1602460800000, 1602979200000], 44: [1603065600000, 1603584000000], 45: [1603670400000, 1604188800000], 46: [1604275200000, 1604793600000], 47: [1604880000000, 1605052800000] }, "weighted_average_g": { 0: [0.1346855916, 0.0314998777], 1: [0.2052449174, 0.0032548171], 2: [0.2290652941, 0.001298254], 3: [0.2975618329, 0.0000594418], 4: [0.2818071016, 0.0001280894], 5: [0.3136784829, 0.0000261336], 6: [0.3388455791, 0.000006726], 7: [0.3486687997, 0.0000038639], 8: [0.2910494497, 0.0000819907], 9: [0.2665338266, 0.0002607445], 10: [0.3245424198, 0.0000147085], 11: [0.3691854274, 0.000001161], 12: [0.3955742593, 0.0000002262], 13: [0.3867761244, 0.0000003946], 14: [0.2961763331, 0.0000636834], 15: [0.3841974215, 0.0000004636], 16: [0.4162460402, 0.0000000586], 17: [0.3894080961, 0.0000003345], 18: [0.4003952165, 0.000000166], 19: [0.4448467081, 0.0000000082], 20: [0.4883897658, 0.0000000003], 21: [0.4239404909, 0.0000000349], 22: [0.4268507372, 0.0000000286], 23: [0.4830892573, 0.0000000005], 24: [0.4466595777, 0.0000000072], 25: [0.4223677233, 0.0000000388], 26: [0.426516392, 0.0000000292], 27: [0.395228849, 0.0000002313], 28: [0.4157945849, 0.0000000604], 29: [0.4231503686, 0.0000000368], 30: [0.4111891784, 0.000000082], 31: [0.4232211288, 0.0000000366], 32: [0.4273451481, 0.0000000276], 33: [0.4128164742, 0.0000000736], 34: [0.4296211917, 0.0000000236], 35: [0.4308375358, 0.0000000217], 36: [0.4200882599, 0.0000000452], 37: [0.4731264581, 0.000000001], 38: [0.4686267504, 0.0000000014], 39: [0.4233319882, 0.0000000363], 40: [0.405126086, 0.0000001221], 41: [0.3776858922, 0.0000006931], 42: [0.3742361421, 0.0000008556], 43: [0.3839225254, 0.0000004716], 44: [0.4071155528, 0.0000001072], 45: [0.3927993983, 0.0000002699], 46: [0.4320514046, 0.00000002], 47: [0.3966445831, 0.0000002113] } }
const quantileData: Data = {"weighted_average":{0:[4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,5,4,4,5,4,4,4,4,5,4,5,4,5,4,4,3,4,3,4,3,4,4,4,4,4,4,4,4,3,3,4,4,4,4,4,4,4,4,4,5,4],1:[4,4,4,4,4,4,4,4,4,4,5,4,5,5,4,4,4,5,4,4,5,4,4,4,4,5,4,5,4,4,4,4,3,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,3,4,5,4,4,4,4,4,5,5],2:[5,4,4,5,4,4,4,4,4,4,4,4,5,5,4,4,4,5,4,4,5,4,4,4,4,6,4,5,4,5,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,4],3:[5,4,4,5,4,3,4,4,4,4,3,4,5,5,4,4,4,4,4,4,5,4,4,4,4,6,4,4,4,5,4,4,3,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4],4:[4,4,4,5,4,4,4,4,4,4,3,4,5,5,4,4,4,5,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,4],5:[5,4,4,5,4,4,4,4,4,4,3,4,5,5,4,4,4,5,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,4],6:[5,4,4,5,4,4,4,4,4,4,3,4,5,5,4,4,4,5,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,5,4,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,5,4,4,4,4,4],7:[5,4,4,5,4,3,4,4,4,4,3,4,4,5,4,4,4,4,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,4,4,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,5,4,4,4,4,4],8:[6,4,4,5,4,4,4,4,4,4,3,4,5,5,4,4,4,4,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,5,4,4,4,5,4],9:[6,4,4,5,4,4,4,4,4,4,3,5,5,4,4,4,4,5,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,5,4,4,4,4,4,5,4,4,4,4,4,4,4,4,4,4,5,4,5,4,4,4,5,4],10:[5,4,4,5,4,4,4,4,4,4,3,4,4,5,4,4,4,4,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,4],11:[6,4,4,5,4,3,4,4,4,4,3,4,4,4,4,4,4,4,4,4,5,4,4,4,4,6,4,4,4,5,4,4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,4,3,4,4,5,4,4,4,4,4,4,4],12:[6,3,3,5,3,3,4,4,3,4,3,4,4,4,4,4,4,4,4,4,5,4,4,4,4,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,3,3,3,3,4,4,4,4,3,4,3,4,4],13:[5,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,4,3,4,4,3,3,3,3,4,3,4,4,3,4,3,3,4,3,4,3,3,3,4,3,3,3,4,3,3,3,3,3,3,4,4,4,3,4,3,4,4],14:[5,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,4,3,4,4,3,3,3,3,4,3,4,3,3,3,3,3,4,3,4,3,3,3,4,3,3,3,4,3,3,3,3,3,3,4,3,4,3,3,3,3,4],15:[4,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,4,3,3,3,3,4,3,3,3,3,3,3,3,4,3,4,3,3,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4],16:[4,3,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,3,3,4,3,3,3,3,3,3,3,4,3,3,3,3,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],17:[5,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,4,3,3,3,3,4,3,3,3,3,3,3,3,4,3,3,3,3,3,4,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,3,4,4],18:[4,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,3,4,3,3,3,3,4,3,4,3,3,3,3,3,4,3,3,3,3,3,4,3,3,3,4,3,3,3,3,3,3,4,3,4,3,3,3,4,4],19:[5,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,4,4,3,3,3,3,4,3,3,3,3,3,3,3,4,3,3,3,3,3,4,3,3,3,3,3,3,3,3,3,3,4,3,4,3,4,3,4,3],20:[4,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,3,3,4,4,3,3,3,3,4,3,3,4,4,3,3,3,4,3,4,3,4,3,4,3,3,3,3,3,3,3,3,3,3,4,3,4,3,4,3,4,3],21:[4,3,3,4,3,3,3,3,3,3,3,3,4,4,3,3,3,4,3,4,4,3,3,3,3,5,3,3,4,4,3,3,3,4,3,4,3,4,3,4,3,3,3,3,3,3,3,3,3,3,4,3,4,3,4,3,4,3],22:[5,3,3,4,3,3,3,3,3,3,3,3,4,4,3,4,3,4,3,4,4,3,3,4,3,5,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,3,3,3,3,4,4,3,4,3,4,3,4,4],23:[4,3,3,4,3,3,3,4,3,3,3,3,4,4,3,4,3,3,4,4,4,4,3,4,3,5,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,3,3,3,3,4,4,3,4,3,4,3,4,4],24:[4,3,3,4,3,3,3,4,3,4,3,3,4,4,3,4,3,4,4,4,4,4,3,4,3,5,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,3,3,3,3,4,4,4,4,3,4,3,4,4],25:[5,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,3,4,4,4,4,4,4,4,3,5,4,4,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,3,4,4],26:[4,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,3,4,3,4,4,4,4,4,3,5,4,4,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,3,4,4],27:[5,3,3,4,3,3,4,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,3,4,4],28:[5,3,3,4,3,3,4,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,4,3,4,3,4,4],29:[5,3,3,4,3,3,4,4,3,4,3,4,5,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,4,4,4],30:[5,3,3,4,3,3,4,4,3,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,4,4,4],31:[4,3,3,4,3,3,4,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,4,4,4,4,4,3,4,3,4,4],32:[5,3,4,4,3,3,4,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,4,4,4,4,4,4,4,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,4,4,4,4,5,3,4,4,4,4],33:[5,3,3,5,3,3,4,4,3,4,3,4,5,4,4,4,4,4,4,4,4,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,3,3,4,4,4,4,5,3,4,3,4,4],34:[5,3,4,5,3,3,3,4,3,4,3,4,4,4,4,4,4,4,4,4,5,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,3,3,4,4,4,4,5,3,4,3,4,4],35:[4,3,3,4,3,3,3,4,4,4,3,3,4,4,4,4,4,4,4,4,4,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,5,3,4,4,4,4],36:[5,3,3,5,3,3,4,4,3,4,3,3,4,4,4,4,4,4,4,4,5,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,5,3,4,4,4,4],37:[5,3,3,4,3,3,3,4,3,4,3,4,4,4,4,4,4,4,4,4,4,4,4,4,3,5,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,4,4,4,4,5,3,4,4,4,4],38:[5,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,3,4,4,4,5,4,3,4,3,5,4,3,4,4,3,4,3,4,3,4,3,4,3,4,3,3,4,4,4,3,3,3,3,4,4,4,5,3,4,3,4,4],39:[4,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,3,4,4,4,5,4,3,4,3,6,4,4,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,5,3,4,3,4,4],40:[4,3,3,4,3,3,3,4,3,4,3,3,5,4,4,4,4,4,4,4,5,4,3,4,3,6,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,4,3,4,3,4,4],41:[5,3,3,5,3,3,4,4,3,4,3,3,4,4,4,4,4,4,4,4,5,4,4,4,3,6,4,4,4,4,4,4,3,4,4,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,5,3,4,3,4,4],42:[5,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,4,4,4,4,5,4,3,4,3,6,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,4,3,4,3,4,4],43:[5,3,3,4,3,3,3,4,3,4,3,3,5,4,4,4,4,4,4,4,5,4,4,4,3,6,4,3,4,4,4,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,3,4,4],44:[5,3,3,5,3,3,3,4,3,4,3,3,4,4,4,4,4,4,4,4,5,4,3,4,3,6,4,3,4,4,4,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,5,3,4,3,4,4],45:[4,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,3,4,4,4,5,4,3,4,3,6,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,5,3,4,3,4,4],46:[4,3,3,4,3,3,3,4,3,4,3,3,4,4,4,4,4,4,4,4,5,4,3,3,3,5,4,3,4,4,4,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,3,3,3,4,4,4,5,3,4,3,4,4],47:[4,3,3,5,3,3,3,4,3,4,3,3,4,4,4,3,4,4,4,4,4,4,4,4,3,5,4,3,4,4,3,4,3,4,3,4,3,4,3,4,4,3,4,4,4,4,4,3,3,4,4,4,4,3,4,3,4,4]},"date":{0:[1576886400000,1576972800000],1:[1577059200000,1577577600000],2:[1577664000000,1578182400000],3:[1578268800000,1578787200000],4:[1578873600000,1579392000000],5:[1579478400000,1579996800000],6:[1580083200000,1580601600000],7:[1580688000000,1581206400000],8:[1581292800000,1581811200000],9:[1581897600000,1582416000000],10:[1582502400000,1583020800000],11:[1583107200000,1583625600000],12:[1583712000000,1584230400000],13:[1584316800000,1584835200000],14:[1584921600000,1585440000000],15:[1585526400000,1586044800000],16:[1586131200000,1586649600000],17:[1586736000000,1587254400000],18:[1587340800000,1587859200000],19:[1587945600000,1588464000000],20:[1588550400000,1589068800000],21:[1589155200000,1589673600000],22:[1589760000000,1590278400000],23:[1590364800000,1590883200000],24:[1590969600000,1591488000000],25:[1591574400000,1592092800000],26:[1592179200000,1592697600000],27:[1592784000000,1593302400000],28:[1593388800000,1593907200000],29:[1593993600000,1594512000000],30:[1594598400000,1595116800000],31:[1595203200000,1595721600000],32:[1595808000000,1596326400000],33:[1596412800000,1596931200000],34:[1597017600000,1597536000000],35:[1597622400000,1598140800000],36:[1598227200000,1598745600000],37:[1598832000000,1599350400000],38:[1599436800000,1599955200000],39:[1600041600000,1600560000000],40:[1600646400000,1601164800000],41:[1601251200000,1601769600000],42:[1601856000000,1602374400000],43:[1602460800000,1602979200000],44:[1603065600000,1603584000000],45:[1603670400000,1604188800000],46:[1604275200000,1604793600000],47:[1604880000000,1605052800000]}}
export const globalMoranEstimate = (week: number): number => {
    return heatData.weighted_average_g[week][0];
}

export const globalMoranPvalue = (week: number): string => {
    const p = heatData.weighted_average_g[week][1];

    let ub = "";
    if (p < 0.001) {
        ub = "10^" + Math.ceil(Math.log10(p))
    }
    else if (p < 0.01) {
        ub = "0.01"
    }
    else if (p < 0.05) {
        ub = "0.05"
    }
    else if (p < 0.1) {
        ub = "0.1"
    }

    return "P-value < " + ub;
}

export const getQuantileBin = (week:number) => [1000, 2500, 5000, 10000, 15000, 20000, 100000];

const formatDate = (input: number): string => {
    const date = new Date(input);
    const day = date.getDate();
    const month = date.getMonth() + 1;
    return `${month < 10 ? "0" + month : month}/${day < 10 ? "0" + day : day}/${date.getFullYear()}`
}

export const getDateRange = (week: number): string => {
    const [start, end] = heatData.date[week];
    return `Distance Traveled ${formatDate(start)} to ${formatDate(end)}`;
}

export const getQuantileColors = (week: number): Array<string> => {
    const colors = ["#FFFFFF", "#FFFF00", "#FFD000", "#FFA200", "#FF7000", "#FF6000", "#FF4000", "#FF2000"]
    return quantileData.weighted_average[week].map(val => {
        return colors[val];
    });
}

export const getHeatColors = (week: number): Array<string> => {
    const colors = ["#ffffff", "#ff0000", "#0000ff"];
    return heatData.weighted_average[week].map(val => {
        return colors[val];
    });
}

export const getStackColors = (week: number): Array<string> => {
    return Array.from(Array(week + 1).keys()).map(w => {
        return heatData.weighted_average[w] // get array of each week array up to current week
    }).reduce((accArr, currArr, currWeek) => {
        return accArr.map((_, i) => { // reduce that array to most recent values
            return currArr[i] !== 0 ? (currArr[i] == 1 ? currWeek : -currWeek) : accArr[i]; //neg value is cold spot
        })
    }).map(val => {
        // number between 90 - 50
        const scale = Math.round(90 - (Math.abs(val) - 1)/47 * 40);

        // if negative, blue else red
        return val == 0 ? "#ffffff" : `hsl(${val < 0 ? 221 : 0}, 100%, ${scale}%)`
    });
}

export const getFips = () => fips;